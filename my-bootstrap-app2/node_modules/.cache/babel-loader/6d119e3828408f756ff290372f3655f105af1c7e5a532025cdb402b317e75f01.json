{"ast":null,"code":"var _jsxFileName = \"d:\\\\Github\\\\Tasks\\\\aws-taskmanager\\\\my-bootstrap-app2\\\\src\\\\pages\\\\login.jsx\",\n  _s = $RefreshSig$();\n// src/pages/login.js\nimport Cookies from 'js-cookie';\nimport { useState } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst COGNITO = {\n  domain: 'eu-north-1u8wcgtv8c.auth.eu-north-1.amazoncognito.com',\n  clientId: '6u4cbji12b6do75n9nkbporvmc' // <-- TaskManager-Public\n};\nexport default function Login() {\n  _s();\n  const [email, setEmail] = useState('');\n  const [pass, setPass] = useState('');\n  const [error, setError] = useState('');\n  const onSubmit = async e => {\n    e.preventDefault();\n    setError('');\n\n    // Build the form body, including client_id but no secret:\n    const body = new URLSearchParams({\n      grant_type: 'password',\n      client_id: COGNITO.clientId,\n      username: email,\n      password: pass,\n      scope: 'openid email profile'\n    });\n    console.log('Form body:', body.toString());\n    console.log('Cognito URL:', `https://${COGNITO.domain}/oauth2/token`);\n    console.log('Cognito headers:', {\n      'Content-Type': 'application/x-www-form-urlencoded'\n    });\n    console.log('Cognito body:', body.toString());\n    console.log('Cognito clientId:', COGNITO.clientId);\n    console.log('Cognito clientSecret:', COGNITO.clientSecret);\n    console.log('Cognito redirectUri:', COGNITO.redirectUri);\n    console.log('Cognito scope:', 'openid email profile');\n    console.log('Cognito response_type:', 'code');\n    try {\n      // Exchange creds for tokens\n      const resp = await fetch(`https://${COGNITO.domain}/oauth2/token`, 'http://http://13.61.194.46/:4000/api/login', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/x-www-form-urlencoded'\n        },\n        body: body.toString()\n      });\n      console.log('Response:', resp);\n      if (!resp.ok) {\n        const errText = await resp.text();\n        throw new Error(errText);\n      }\n      const data = await resp.json();\n\n      // Persist tokens as cookies\n      Cookies.set('idToken', data.id_token, {\n        expires: 1,\n        sameSite: 'lax'\n      });\n      Cookies.set('accessToken', data.access_token, {\n        expires: 1,\n        sameSite: 'lax'\n      });\n      if (data.refresh_token) {\n        Cookies.set('refreshToken', data.refresh_token, {\n          expires: 30,\n          sameSite: 'lax'\n        });\n      }\n\n      // Redirect home\n      window.location.href = '/';\n    } catch (err) {\n      console.error(err);\n      setError('Login failed: ' + err.message);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      maxWidth: 400,\n      margin: '2rem auto'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Sign In\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: onSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Username\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 34\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          value: email,\n          onChange: e => setEmail(e.target.value),\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: 8\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 34\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          value: pass,\n          onChange: e => setPass(e.target.value),\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        style: {\n          marginTop: 12\n        },\n        children: \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        color: 'red'\n      },\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 73,\n    columnNumber: 5\n  }, this);\n}\n_s(Login, \"Shlp2It1TfeMhjjY1Z+yS4Tc594=\");\n_c = Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["Cookies","useState","jsxDEV","_jsxDEV","COGNITO","domain","clientId","Login","_s","email","setEmail","pass","setPass","error","setError","onSubmit","e","preventDefault","body","URLSearchParams","grant_type","client_id","username","password","scope","console","log","toString","clientSecret","redirectUri","resp","fetch","method","headers","ok","errText","text","Error","data","json","set","id_token","expires","sameSite","access_token","refresh_token","window","location","href","err","message","style","maxWidth","margin","children","fileName","_jsxFileName","lineNumber","columnNumber","value","onChange","target","required","marginTop","type","color","_c","$RefreshReg$"],"sources":["d:/Github/Tasks/aws-taskmanager/my-bootstrap-app2/src/pages/login.jsx"],"sourcesContent":["// src/pages/login.js\nimport Cookies from 'js-cookie';\nimport { useState } from 'react';\n\nconst COGNITO = {\n  domain:   'eu-north-1u8wcgtv8c.auth.eu-north-1.amazoncognito.com',\n  clientId: '6u4cbji12b6do75n9nkbporvmc'  // <-- TaskManager-Public\n};\n\nexport default function Login() {\n  const [email, setEmail]     = useState('');\n  const [pass, setPass]       = useState('');\n  const [error, setError]     = useState('');\n\n  const onSubmit = async e => {\n    e.preventDefault();\n    setError('');\n\n    // Build the form body, including client_id but no secret:\n    const body = new URLSearchParams({\n      grant_type: 'password',\n      client_id:  COGNITO.clientId,\n      username:   email,\n      password:   pass,\n      scope:      'openid email profile'\n    });\n    console.log('Form body:', body.toString());\n    console.log('Cognito URL:', `https://${COGNITO.domain}/oauth2/token`);\n    console.log('Cognito headers:', { 'Content-Type': 'application/x-www-form-urlencoded' });\n    console.log('Cognito body:', body.toString());\n    console.log('Cognito clientId:', COGNITO.clientId);\n    console.log('Cognito clientSecret:', COGNITO.clientSecret);\n    console.log('Cognito redirectUri:', COGNITO.redirectUri);\n    console.log('Cognito scope:', 'openid email profile');\n    console.log('Cognito response_type:', 'code');\n\n    try {\n      // Exchange creds for tokens\n      const resp = await fetch(\n        `https://${COGNITO.domain}/oauth2/token`,\n        'http://http://13.61.194.46/:4000/api/login',\n        {\n          method:  'POST',\n          headers: { 'Content-Type': 'application/x-www-form-urlencoded' },\n          body:    body.toString()\n        }\n      );\n      console.log('Response:', resp);\n\n      if (!resp.ok) {\n        const errText = await resp.text();\n        throw new Error(errText);\n      }\n\n      const data = await resp.json();\n\n      // Persist tokens as cookies\n      Cookies.set('idToken',     data.id_token,     { expires:1, sameSite:'lax' });\n      Cookies.set('accessToken', data.access_token, { expires:1, sameSite:'lax' });\n      if (data.refresh_token) {\n        Cookies.set('refreshToken', data.refresh_token, { expires:30, sameSite:'lax' });\n      }\n\n      // Redirect home\n      window.location.href = '/';\n    } catch(err) {\n      console.error(err);\n      setError('Login failed: ' + err.message);\n    }\n  };\n\n  return (\n    <div style={{maxWidth:400,margin:'2rem auto'}}>\n      <h2>Sign In</h2>\n      <form onSubmit={onSubmit}>\n        <div>\n          <label>Username</label><br/>\n          <input value={email}\n                 onChange={e=>setEmail(e.target.value)} required />\n        </div>\n        <div style={{marginTop:8}}>\n          <label>Password</label><br/>\n          <input type=\"password\"\n                 value={pass}\n                 onChange={e=>setPass(e.target.value)} required />\n        </div>\n        <button type=\"submit\" style={{marginTop:12}}>Login</button>\n      </form>\n      {error && <p style={{color:'red'}}>{error}</p>}\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}