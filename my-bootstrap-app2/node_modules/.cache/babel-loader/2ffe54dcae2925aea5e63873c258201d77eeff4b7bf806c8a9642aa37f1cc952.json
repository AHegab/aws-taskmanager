{"ast":null,"code":"var _jsxFileName = \"d:\\\\Github\\\\Tasks\\\\aws-taskmanager\\\\my-bootstrap-app2\\\\src\\\\pages\\\\Callback.jsx\",\n  _s = $RefreshSig$();\n// src/pages/Callback.js\nimport { useEffect } from 'react';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport Cookies from 'js-cookie';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Callback() {\n  _s();\n  const location = useLocation();\n  const navigate = useNavigate();\n  useEffect(() => {\n    const queryParams = new URLSearchParams(location.search);\n    const code = queryParams.get('code');\n    const error = queryParams.get('error');\n    if (error) {\n      console.error('Authentication error:', error);\n      navigate('/');\n      return;\n    }\n    if (code) {\n      // Exchange the authorization code for tokens\n      exchangeCodeForTokens(code).then(() => navigate('/')).catch(err => {\n        console.error('Token exchange failed:', err);\n        navigate('/');\n      });\n    } else {\n      navigate('/');\n    }\n  }, [location, navigate]);\n  async function exchangeCodeForTokens(code) {\n    const params = new URLSearchParams();\n    params.append('grant_type', 'authorization_code');\n    params.append('client_id', '6thkk9j96oa02djeccritml1gr');\n    params.append('code', code);\n    params.append('redirect_uri', 'http://localhost:3000');\n    const response = await axios.post('https://eu-north-1u8wcgtv8c.auth.eu-north-1.amazoncognito.com/oauth2/token', params.toString(), {\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded'\n      }\n    });\n\n    // Store tokens in cookies\n    Cookies.set('idToken', response.data.id_token, {\n      expires: 1\n    });\n    Cookies.set('accessToken', response.data.access_token, {\n      expires: 1\n    });\n    Cookies.set('refreshToken', response.data.refresh_token, {\n      expires: 30\n    });\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"Processing login...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 10\n  }, this);\n}\n_s(Callback, \"fPjCxODVr6jVvib6o2c9VLE4s84=\", false, function () {\n  return [useLocation, useNavigate];\n});\n_c = Callback;\nvar _c;\n$RefreshReg$(_c, \"Callback\");","map":{"version":3,"names":["useEffect","useNavigate","useLocation","Cookies","axios","jsxDEV","_jsxDEV","Callback","_s","location","navigate","queryParams","URLSearchParams","search","code","get","error","console","exchangeCodeForTokens","then","catch","err","params","append","response","post","toString","headers","set","data","id_token","expires","access_token","refresh_token","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["d:/Github/Tasks/aws-taskmanager/my-bootstrap-app2/src/pages/Callback.jsx"],"sourcesContent":["// src/pages/Callback.js\nimport { useEffect } from 'react';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport Cookies from 'js-cookie';\nimport axios from 'axios';\n\nexport default function Callback() {\n  const location = useLocation();\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    const queryParams = new URLSearchParams(location.search);\n    const code = queryParams.get('code');\n    const error = queryParams.get('error');\n\n    if (error) {\n      console.error('Authentication error:', error);\n      navigate('/');\n      return;\n    }\n\n    if (code) {\n      // Exchange the authorization code for tokens\n      exchangeCodeForTokens(code)\n        .then(() => navigate('/'))\n        .catch(err => {\n          console.error('Token exchange failed:', err);\n          navigate('/');\n        });\n    } else {\n      navigate('/');\n    }\n  }, [location, navigate]);\n\n  async function exchangeCodeForTokens(code) {\n    const params = new URLSearchParams();\n    params.append('grant_type', 'authorization_code');\n    params.append('client_id', '6thkk9j96oa02djeccritml1gr');\n    params.append('code', code);\n    params.append('redirect_uri', 'http://localhost:3000');\n\n    const response = await axios.post(\n      'https://eu-north-1u8wcgtv8c.auth.eu-north-1.amazoncognito.com/oauth2/token',\n      params.toString(),\n      {\n        headers: {\n          'Content-Type': 'application/x-www-form-urlencoded',\n        }\n      }\n    );\n\n    // Store tokens in cookies\n    Cookies.set('idToken', response.data.id_token, { expires: 1 });\n    Cookies.set('accessToken', response.data.access_token, { expires: 1 });\n    Cookies.set('refreshToken', response.data.refresh_token, { expires: 30 });\n  }\n\n  return <div>Processing login...</div>;\n}"],"mappings":";;AAAA;AACA,SAASA,SAAS,QAAQ,OAAO;AACjC,SAASC,WAAW,EAAEC,WAAW,QAAQ,kBAAkB;AAC3D,OAAOC,OAAO,MAAM,WAAW;AAC/B,OAAOC,KAAK,MAAM,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE1B,eAAe,SAASC,QAAQA,CAAA,EAAG;EAAAC,EAAA;EACjC,MAAMC,QAAQ,GAAGP,WAAW,CAAC,CAAC;EAC9B,MAAMQ,QAAQ,GAAGT,WAAW,CAAC,CAAC;EAE9BD,SAAS,CAAC,MAAM;IACd,MAAMW,WAAW,GAAG,IAAIC,eAAe,CAACH,QAAQ,CAACI,MAAM,CAAC;IACxD,MAAMC,IAAI,GAAGH,WAAW,CAACI,GAAG,CAAC,MAAM,CAAC;IACpC,MAAMC,KAAK,GAAGL,WAAW,CAACI,GAAG,CAAC,OAAO,CAAC;IAEtC,IAAIC,KAAK,EAAE;MACTC,OAAO,CAACD,KAAK,CAAC,uBAAuB,EAAEA,KAAK,CAAC;MAC7CN,QAAQ,CAAC,GAAG,CAAC;MACb;IACF;IAEA,IAAII,IAAI,EAAE;MACR;MACAI,qBAAqB,CAACJ,IAAI,CAAC,CACxBK,IAAI,CAAC,MAAMT,QAAQ,CAAC,GAAG,CAAC,CAAC,CACzBU,KAAK,CAACC,GAAG,IAAI;QACZJ,OAAO,CAACD,KAAK,CAAC,wBAAwB,EAAEK,GAAG,CAAC;QAC5CX,QAAQ,CAAC,GAAG,CAAC;MACf,CAAC,CAAC;IACN,CAAC,MAAM;MACLA,QAAQ,CAAC,GAAG,CAAC;IACf;EACF,CAAC,EAAE,CAACD,QAAQ,EAAEC,QAAQ,CAAC,CAAC;EAExB,eAAeQ,qBAAqBA,CAACJ,IAAI,EAAE;IACzC,MAAMQ,MAAM,GAAG,IAAIV,eAAe,CAAC,CAAC;IACpCU,MAAM,CAACC,MAAM,CAAC,YAAY,EAAE,oBAAoB,CAAC;IACjDD,MAAM,CAACC,MAAM,CAAC,WAAW,EAAE,4BAA4B,CAAC;IACxDD,MAAM,CAACC,MAAM,CAAC,MAAM,EAAET,IAAI,CAAC;IAC3BQ,MAAM,CAACC,MAAM,CAAC,cAAc,EAAE,uBAAuB,CAAC;IAEtD,MAAMC,QAAQ,GAAG,MAAMpB,KAAK,CAACqB,IAAI,CAC/B,4EAA4E,EAC5EH,MAAM,CAACI,QAAQ,CAAC,CAAC,EACjB;MACEC,OAAO,EAAE;QACP,cAAc,EAAE;MAClB;IACF,CACF,CAAC;;IAED;IACAxB,OAAO,CAACyB,GAAG,CAAC,SAAS,EAAEJ,QAAQ,CAACK,IAAI,CAACC,QAAQ,EAAE;MAAEC,OAAO,EAAE;IAAE,CAAC,CAAC;IAC9D5B,OAAO,CAACyB,GAAG,CAAC,aAAa,EAAEJ,QAAQ,CAACK,IAAI,CAACG,YAAY,EAAE;MAAED,OAAO,EAAE;IAAE,CAAC,CAAC;IACtE5B,OAAO,CAACyB,GAAG,CAAC,cAAc,EAAEJ,QAAQ,CAACK,IAAI,CAACI,aAAa,EAAE;MAAEF,OAAO,EAAE;IAAG,CAAC,CAAC;EAC3E;EAEA,oBAAOzB,OAAA;IAAA4B,QAAA,EAAK;EAAmB;IAAAC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAK,CAAC;AACvC;AAAC9B,EAAA,CApDuBD,QAAQ;EAAA,QACbL,WAAW,EACXD,WAAW;AAAA;AAAAsC,EAAA,GAFNhC,QAAQ;AAAA,IAAAgC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}