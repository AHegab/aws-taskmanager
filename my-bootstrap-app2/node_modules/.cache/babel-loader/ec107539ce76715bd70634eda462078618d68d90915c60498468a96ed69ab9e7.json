{"ast":null,"code":"var _jsxFileName = \"d:\\\\Github\\\\Tasks\\\\aws-taskmanager\\\\my-bootstrap-app2\\\\src\\\\pages\\\\Callback.jsx\",\n  _s = $RefreshSig$();\n// src/pages/Callback.js\nimport { useEffect } from 'react';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport Cookies from 'js-cookie';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Callback() {\n  _s();\n  const location = useLocation();\n  const navigate = useNavigate();\n  useEffect(() => {\n    const handleAuth = async () => {\n      const params = new URLSearchParams(location.search);\n      const code = params.get('code');\n      const error = params.get('error');\n      if (error) {\n        console.error('Auth error:', params.get('error_description'));\n        navigate('/login?error=' + error);\n        return;\n      }\n      if (!code) {\n        navigate('/login?error=missing_code');\n        return;\n      }\n      try {\n        const tokenResponse = await axios.post('https://eu-north-1u8wcgtv8c.auth.eu-north-1.amazoncognito.com/oauth2/token', new URLSearchParams({\n          grant_type: 'authorization_code',\n          client_id: '6thkk9j96oa02djeccritml1gr',\n          redirect_uri: 'http://localhost:3000/callback',\n          code: code\n        }), {\n          headers: {\n            'Content-Type': 'application/x-www-form-urlencoded'\n          }\n        });\n\n        // Store tokens securely\n        Cookies.set('idToken', tokenResponse.data.id_token, {\n          expires: 1,\n          // 1 day\n          secure: process.env.NODE_ENV === 'production',\n          sameSite: 'lax'\n        });\n        navigate('/');\n      } catch (err) {\n        console.error('Token exchange failed:', err);\n        navigate('/login?error=token_exchange_failed');\n      }\n    };\n    handleAuth();\n  }, [location, navigate]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"Authenticating...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 10\n  }, this);\n}\n_s(Callback, \"fPjCxODVr6jVvib6o2c9VLE4s84=\", false, function () {\n  return [useLocation, useNavigate];\n});\n_c = Callback;\nvar _c;\n$RefreshReg$(_c, \"Callback\");","map":{"version":3,"names":["useEffect","useNavigate","useLocation","Cookies","axios","jsxDEV","_jsxDEV","Callback","_s","location","navigate","handleAuth","params","URLSearchParams","search","code","get","error","console","tokenResponse","post","grant_type","client_id","redirect_uri","headers","set","data","id_token","expires","secure","process","env","NODE_ENV","sameSite","err","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["d:/Github/Tasks/aws-taskmanager/my-bootstrap-app2/src/pages/Callback.jsx"],"sourcesContent":["// src/pages/Callback.js\nimport { useEffect } from 'react';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport Cookies from 'js-cookie';\nimport axios from 'axios';\n\nexport default function Callback() {\n  const location = useLocation();\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    const handleAuth = async () => {\n      const params = new URLSearchParams(location.search);\n      const code = params.get('code');\n      const error = params.get('error');\n\n      if (error) {\n        console.error('Auth error:', params.get('error_description'));\n        navigate('/login?error=' + error);\n        return;\n      }\n\n      if (!code) {\n        navigate('/login?error=missing_code');\n        return;\n      }\n\n      try {\n        const tokenResponse = await axios.post(\n          'https://eu-north-1u8wcgtv8c.auth.eu-north-1.amazoncognito.com/oauth2/token',\n          new URLSearchParams({\n            grant_type: 'authorization_code',\n            client_id: '6thkk9j96oa02djeccritml1gr',\n            redirect_uri: 'http://localhost:3000/callback',\n            code: code\n          }),\n          {\n            headers: {\n              'Content-Type': 'application/x-www-form-urlencoded'\n            }\n          }\n        );\n\n        // Store tokens securely\n        Cookies.set('idToken', tokenResponse.data.id_token, { \n          expires: 1, // 1 day\n          secure: process.env.NODE_ENV === 'production',\n          sameSite: 'lax'\n        });\n        \n        navigate('/');\n      } catch (err) {\n        console.error('Token exchange failed:', err);\n        navigate('/login?error=token_exchange_failed');\n      }\n    };\n\n    handleAuth();\n  }, [location, navigate]);\n\n  return <div>Authenticating...</div>;\n}"],"mappings":";;AAAA;AACA,SAASA,SAAS,QAAQ,OAAO;AACjC,SAASC,WAAW,EAAEC,WAAW,QAAQ,kBAAkB;AAC3D,OAAOC,OAAO,MAAM,WAAW;AAC/B,OAAOC,KAAK,MAAM,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE1B,eAAe,SAASC,QAAQA,CAAA,EAAG;EAAAC,EAAA;EACjC,MAAMC,QAAQ,GAAGP,WAAW,CAAC,CAAC;EAC9B,MAAMQ,QAAQ,GAAGT,WAAW,CAAC,CAAC;EAE9BD,SAAS,CAAC,MAAM;IACd,MAAMW,UAAU,GAAG,MAAAA,CAAA,KAAY;MAC7B,MAAMC,MAAM,GAAG,IAAIC,eAAe,CAACJ,QAAQ,CAACK,MAAM,CAAC;MACnD,MAAMC,IAAI,GAAGH,MAAM,CAACI,GAAG,CAAC,MAAM,CAAC;MAC/B,MAAMC,KAAK,GAAGL,MAAM,CAACI,GAAG,CAAC,OAAO,CAAC;MAEjC,IAAIC,KAAK,EAAE;QACTC,OAAO,CAACD,KAAK,CAAC,aAAa,EAAEL,MAAM,CAACI,GAAG,CAAC,mBAAmB,CAAC,CAAC;QAC7DN,QAAQ,CAAC,eAAe,GAAGO,KAAK,CAAC;QACjC;MACF;MAEA,IAAI,CAACF,IAAI,EAAE;QACTL,QAAQ,CAAC,2BAA2B,CAAC;QACrC;MACF;MAEA,IAAI;QACF,MAAMS,aAAa,GAAG,MAAMf,KAAK,CAACgB,IAAI,CACpC,4EAA4E,EAC5E,IAAIP,eAAe,CAAC;UAClBQ,UAAU,EAAE,oBAAoB;UAChCC,SAAS,EAAE,4BAA4B;UACvCC,YAAY,EAAE,gCAAgC;UAC9CR,IAAI,EAAEA;QACR,CAAC,CAAC,EACF;UACES,OAAO,EAAE;YACP,cAAc,EAAE;UAClB;QACF,CACF,CAAC;;QAED;QACArB,OAAO,CAACsB,GAAG,CAAC,SAAS,EAAEN,aAAa,CAACO,IAAI,CAACC,QAAQ,EAAE;UAClDC,OAAO,EAAE,CAAC;UAAE;UACZC,MAAM,EAAEC,OAAO,CAACC,GAAG,CAACC,QAAQ,KAAK,YAAY;UAC7CC,QAAQ,EAAE;QACZ,CAAC,CAAC;QAEFvB,QAAQ,CAAC,GAAG,CAAC;MACf,CAAC,CAAC,OAAOwB,GAAG,EAAE;QACZhB,OAAO,CAACD,KAAK,CAAC,wBAAwB,EAAEiB,GAAG,CAAC;QAC5CxB,QAAQ,CAAC,oCAAoC,CAAC;MAChD;IACF,CAAC;IAEDC,UAAU,CAAC,CAAC;EACd,CAAC,EAAE,CAACF,QAAQ,EAAEC,QAAQ,CAAC,CAAC;EAExB,oBAAOJ,OAAA;IAAA6B,QAAA,EAAK;EAAiB;IAAAC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAK,CAAC;AACrC;AAAC/B,EAAA,CAvDuBD,QAAQ;EAAA,QACbL,WAAW,EACXD,WAAW;AAAA;AAAAuC,EAAA,GAFNjC,QAAQ;AAAA,IAAAiC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}